<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/qunit/1.18.0/qunit.css"/>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <h2>This is the TSTest page for running JavaScript in a browser. </h2>

    <script>
        (function () {
            var print = console.log;

            Object.defineProperty(window, 'sendResultToChecker', {
                enumerable: false,
                configurable: false,
                writable: false,
                value: function send (json) {
                    var xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function() {
                        // nothing (currently)
                    };
                    xhttp.open("POST", "post", true);
                    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                    if (typeof json === "string") {
                        xhttp.send(json);
                    } else {
                        xhttp.send(JSON.stringify(json));
                    }
                }
            });

            // TODO: There is not option to use this yet
            Object.defineProperty(window, 'createStartDumpButton', {
                enumerable: false,
                configurable: false,
                writable: false,
                value: function (callback) {
                    var button = document.createElement("button");
                    button.appendChild(document.createTextNode("Click me when the script is done"));
                    button.style.padding = "20px";
                    button.style.fontSize = "20px";
                    button.addEventListener("click", function ()  {
                        callback();
                    });
                    document.body.insertBefore(button,document.body.childNodes[0]);
                }
            });
        })();
    </script>
    <script src="test.js"></script>

    <div id="qunit"></div>
</body>
</html>